<script src="https://cdn.polyfill.io/v2/polyfill.min.js"></script>


<script>
 function toggleModal(target){
   const portal            = document.getElementById(target);
   const headerCloseButton = document.getElementsByClassName('modalClose')[0];
   const footerCloseButton = document.getElementsByClassName('modalCancel')[0];

   portal.style.display = (portal.style.display === "none") ? "" : "none";

   if(portal.style.display === ""){
      // apply Focus to close button on open...
      headerCloseButton ? headerCloseButton.focus() : footerCloseButton.focus();
      document.body.style = "overflow:hidden;"
   }

   if(portal.style.display === "none"){
     document.body.style = ""
   }

   // apply padding based on clientHeight...
   const modalBody    = document.getElementsByClassName('modalBody')[0];
   const modalBody2   = document.getElementsByClassName('modalBody')[1];
   const modalContent = document.getElementsByClassName('modalContent')[0];
   const modalOverlay = document.getElementsByClassName('modalOverlay')[0];
   const header       = document.getElementsByClassName('modalHeader')[0];
   const footer       = document.getElementsByClassName('modalFooter')[0];

   const windowHeight  = window.innerHeight;
   const contentHeight = modalContent.offsetHeight;
   const paddingHeight = (windowHeight - contentHeight) / 2;
   const padding       = paddingHeight > 60 ? paddingHeight : 60;
   const headerHeight  = header.getBoundingClientRect().height;
   const footerHeight  = footer ? footer.getBoundingClientRect().height : 0;

   modalBody.style     = `max-height:${windowHeight - (headerHeight + footerHeight + 120)}px`;
   modalBody2.style    = `max-height:${windowHeight - (headerHeight + 120)}px`;
   modalOverlay.style  = `padding-top:${padding}px; padding-bottom:${padding}px;`;

   // conditional borders on modalbody if scrollbar is present...
   modalBody.className  = (modalBody.clientHeight < modalBody.scrollHeight) ? 'modalBody modalBody_border' : 'modalBody modalBody_border_normal';
   modalBody2.className = (modalBody2.clientHeight < modalBody2.scrollHeight) ? 'modalBody modalBody_border' : 'modalBody modalBody_border_normal';

   window.onresize = () => {
     modalBody.className  = (modalBody.clientHeight < modalBody.scrollHeight) ? 'modalBody modalBody_border' : 'modalBody modalBody_border_normal';
     modalBody2.className = (modalBody2.clientHeight < modalBody2.scrollHeight) ? 'modalBody modalBody_border' : 'modalBody modalBody_border_normal';
   }

 }
</script>
